<!DOCTYPE html>

<html lang="en-US">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>z-search</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    </head>
    <body class="d-flex flex-column align-items-center">
        <h1 class="mt-4">Z-Search</h1>
        
        <form id="form" class="d-flex w-50" action="" method="GET">
                <input id="query" type="text" class="flex-grow-1 bg-white rounded-2 text-black border" name="query">
                <button id="search-button" type="submit" class="d-flex align-items-center p-2 bg-white rounded-2 text-dark border ms-3">
                    <p class="m-0">
                        Search
                    </p>
                </button>
        </form>
        <script>
            var form_element = document.getElementById('form');
            var q_input_element = document.getElementById('query');
            var search_button_element = document.getElementById('search-button');
            
            const social_media_list = [
                'facebook.com',
                'reddit.com',
                'youtube.com',
                'instagram.com',
                'tiktok.com',
                'x.com',
            ]
            
            function antiSocialMediaPattern() {
                final_query = ''
                for (const site of social_media_list) {
                    final_query += ` -site:${site}`;
                }
                
                return final_query
            }
            
            function executeQuery() {
                user_query_value = q_input_element.value;
                full_query = `https://duckduckgo.com/?t=ffab&q=${user_query_value}${antiSocialMediaPattern()}&ia=web`
                
                encoded_url = encodeURI(full_query);
        
                window.open(encoded_url, "_self");
            }
            
            
            window.addEventListener("DOMContentLoaded", function() {
                form_element.addEventListener("submit", function(e) {
                    e.preventDefault(); // before the code
    
                    executeQuery();
                })
            });
        </script>
    </body>
</html>